# 权限管理

权限管理模块，是用来管理页面权限的，主要分为3块
  1. 通过权限控制，左侧菜单栏中菜单的展示
  2. 通过权限控制，页面跳转时是否允许用户访问
  3. 通过权限控制，页面元素的展示

相关的逻辑在src/utils/permission.js中。

#### 主要实现
  1. 在后台配置每个路由对应的ID。配置路由时，必须把页面的权限ID与后台数据库中的权限ID一一对应。具体配置可以查看第3点的路由配置
  2. 进入页面时，通过接口获取用户拥有的页面权限id,是一个页面id组成的数组。接口格式：
    ```javascript
        {
            status:200,
            message:'',
            data:[1,2,3,4]  //页面权限ID
        }
    ```
  3. 通过前端判断，只有匹配到ID，才允许访问和展示。
    * 通过菜单和其他链接跳转的路由

    ```javascript
        //接口返回数据[1,2,3]
        {
            path: '/', 
            redirect: '/demand',  
            name: '首页',   
            meta: { 
                id: 1,    //存在1
                icon: 'fa-dashboard',  
            },
        },
        //可以访问‘test.yy.com/#/demand‘,如果是菜单，还会在菜单栏中展示
        {
          path: '/multipleForm',
          name: '表单页',
          component: MultipleForm,
          hidden: false,
          meta: {
              id: 8,  // 不存在8
              icon: 'fa-pie-chart'
          }
        }
        //无法通过‘test.yy.com/#/multipleForm’访问，直接跳转到403提示页面。如果是菜单，还会隐藏入口
    ```
    * 页面上的元素，如果通过自定义组件`v-mypermit='boolean'`或者`v-mypermit='id'`设置属性，id如果存在，或者值是true,元素就可以在页面上展示，否则隐藏。例如

    ```
    <!--接口返回数据[1,2,3]-->
    <div v-mypermit='1'>  <!--显示-->
    <div v-mypermit='5'>  <!--隐藏-->
    <div v-mypermit='true'>  <!--显示-->
    <div v-mypermit='fasle'>  <!--隐藏-->
    
    ```